using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using RestSharp;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.Configuration;
using System.Diagnostics;
namespace APITest
{
    public class DTO
    {
        public T Deserialize<T>(string ojectContent)
        {
            //object content = "[{\"id\":1,\"title\":\"Avengers: Endgame\",\"desc\":\"After the devastating events of Avengers: Infinity War (2018), the universe is in ruins due to the efforts of the Mad Titan, Thanos.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Chris Hemsworth\",\"Mark Ruffalo\"],\"directors\":\"Anthony Russo\",\"rating\":\"9.5/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\",\"Si-Fi\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2019\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":2,\"title\":\"Spider-Man: Homecoming\",\"desc\":\"Peter Parker balances his life as an ordinary high school student in Queens with his superhero alter-ego Spider-Man, and finds himself on the trail of a new menace prowling the skies of New York City.\",\"actors\":[\"Tom Holland\",\"Robert Downey Jr.\",\"Michael Keaton\",\"Marisa Tomei\"],\"directors\":\"Jon Watts\",\"rating\":\"8.0/10\",\"category\":[\"Action\",\"Adventure\",\"Romance\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2017\",\"languages\":[\"English\",\"Spanish\",\"Japanese\"]},{\"id\":3,\"title\":\"Captain America: Civil War\",\"desc\":\"Political involvement in the Avengers' affairs causes a rift between Captain America and Iron Man.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Scarlett Johansson\",\"Anthony Mackie\",\"Chadwick Boseman\"],\"directors\":\"Anthony Russo\",\"rating\":\"7.8/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2016\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":4,\"title\":\"Back to the Future\",\"desc\":\"Marty McFly, a 17-year-old high school student, is accidentally sent thirty years into the past in a time-traveling DeLorean invented by his close friend, the eccentric scientist Doc Brown.\",\"actors\":[\"Michael J. Fox\",\"Christopher Lloyd\",\"Lea Thompson\",\"Crispin Glover\"],\"directors\":\"Robert Zemeckis\",\"rating\":\"8.5/10\",\"category\":[\"Adventure\",\"Drama\",\"Si-Fi\",\"Romance\"],\"Company\":\"Universal Pictures\",\"releaseDate\":\"1985\",\"languages\":[\"English\",\"Spanish\"]},{\"id\":5,\"title\":\"The Conjuring 3: The Devil Made Me Do It\",\"desc\":\"The Warrens investigate a murder that may be linked to a demonic possession.\",\"actors\":[\"Patrick Wilson\",\"Vera Farmiga\",\"Ruairi O'Connor\",\"Sarah Catherine Hook\"],\"directors\":\"Michael Chaves\",\"rating\":\"6.5/10\",\"category\":[\"Horror\",\"Drama\",\"Gore\"],\"Company\":\"Warner Bros. Pictures\",\"releaseDate\":\"2021\",\"languages\":[\"English\",\"Spanish\"]}]"
            string transform = ojectContent.Insert(0, "{\"result\":");
            transform += '}';
            //transformed =                       "{\"result\":[{\"id\":1,\"title\":\"Avengers: Endgame\",\"desc\":\"After the devastating events of Avengers: Infinity War (2018), the universe is in ruins due to the efforts of the Mad Titan, Thanos.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Chris Hemsworth\",\"Mark Ruffalo\"],\"directors\":\"Anthony Russo\",\"rating\":\"9.5/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\",\"Si-Fi\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2019\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":2,\"title\":\"Spider-Man: Homecoming\",\"desc\":\"Peter Parker balances his life as an ordinary high school student in Queens with his superhero alter-ego Spider-Man, and finds himself on the trail of a new menace prowling the skies of New York City.\",\"actors\":[\"Tom Holland\",\"Robert Downey Jr.\",\"Michael Keaton\",\"Marisa Tomei\"],\"directors\":\"Jon Watts\",\"rating\":\"8.0/10\",\"category\":[\"Action\",\"Adventure\",\"Romance\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2017\",\"languages\":[\"English\",\"Spanish\",\"Japanese\"]},{\"id\":3,\"title\":\"Captain America: Civil War\",\"desc\":\"Political involvement in the Avengers' affairs causes a rift between Captain America and Iron Man.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Scarlett Johansson\",\"Anthony Mackie\",\"Chadwick Boseman\"],\"directors\":\"Anthony Russo\",\"rating\":\"7.8/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2016\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":4,\"title\":\"Back to the Future\",\"desc\":\"Marty McFly, a 17-year-old high school student, is accidentally sent thirty years into the past in a time-traveling DeLorean invented by his close friend, the eccentric scientist Doc Brown.\",\"actors\":[\"Michael J. Fox\",\"Christopher Lloyd\",\"Lea Thompson\",\"Crispin Glover\"],\"directors\":\"Robert Zemeckis\",\"rating\":\"8.5/10\",\"category\":[\"Adventure\",\"Drama\",\"Si-Fi\",\"Romance\"],\"Company\":\"Universal Pictures\",\"releaseDate\":\"1985\",\"languages\":[\"English\",\"Spanish\"]},{\"id\":5,\"title\":\"The Conjuring 3: The Devil Made Me Do It\",\"desc\":\"The Warrens investigate a murder that may be linked to a demonic possession.\",\"actors\":[\"Patrick Wilson\",\"Vera Farmiga\",\"Ruairi O'Connor\",\"Sarah Catherine Hook\"],\"directors\":\"Michael Chaves\",\"rating\":\"6.5/10\",\"category\":[\"Horror\",\"Drama\",\"Gore\"],\"Company\":\"Warner Bros. Pictures\",\"releaseDate\":\"2021\",\"languages\":[\"English\",\"Spanish\"]}]}"
            string manipulatedbatchfilmrequest = "{\"result\": [{\"id\":1,\"title\":\"Avengers: Endgame\",\"desc\":\"After the devastating events of Avengers: Infinity War (2018), the universe is in ruins due to the efforts of the Mad Titan, Thanos.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Chris Hemsworth\",\"Mark Ruffalo\"],\"directors\":\"Anthony Russo\",\"rating\":\"9.5/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\",\"Si-Fi\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2019\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":2,\"title\":\"Spider-Man: Homecoming\",\"desc\":\"Peter Parker balances his life as an ordinary high school student in Queens with his superhero alter-ego Spider-Man, and finds himself on the trail of a new menace prowling the skies of New York City.\",\"actors\":[\"Tom Holland\",\"Robert Downey Jr.\",\"Michael Keaton\",\"Marisa Tomei\"],\"directors\":\"Jon Watts\",\"rating\":\"8.0/10\",\"category\":[\"Action\",\"Adventure\",\"Romance\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2017\",\"languages\":[\"English\",\"Spanish\",\"Japanese\"]},{\"id\":3,\"title\":\"Captain America: Civil War\",\"desc\":\"Political involvement in the Avengers' affairs causes a rift between Captain America and Iron Man.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Scarlett Johansson\",\"Anthony Mackie\",\"Chadwick Boseman\"],\"directors\":\"Anthony Russo\",\"rating\":\"7.8/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2016\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]},{\"id\":4,\"title\":\"Back to the Future\",\"desc\":\"Marty McFly, a 17-year-old high school student, is accidentally sent thirty years into the past in a time-traveling DeLorean invented by his close friend, the eccentric scientist Doc Brown.\",\"actors\":[\"Michael J. Fox\",\"Christopher Lloyd\",\"Lea Thompson\",\"Crispin Glover\"],\"directors\":\"Robert Zemeckis\",\"rating\":\"8.5/10\",\"category\":[\"Adventure\",\"Drama\",\"Si-Fi\",\"Romance\"],\"Company\":\"Universal Pictures\",\"releaseDate\":\"1985\",\"languages\":[\"English\",\"Spanish\"]},{\"id\":5,\"title\":\"The Conjuring 3: The Devil Made Me Do It\",\"desc\":\"The Warrens investigate a murder that may be linked to a demonic possession.\",\"actors\":[\"Patrick Wilson\",\"Vera Farmiga\",\"Ruairi O'Connor\",\"Sarah Catherine Hook\"],\"directors\":\"Michael Chaves\",\"rating\":\"6.5/10\",\"category\":[\"Horror\",\"Drama\",\"Gore\"],\"Company\":\"Warner Bros. Pictures\",\"releaseDate\":\"2021\",\"languages\":[\"English\",\"Spanish\"]}]}";
            string manipulatedsinglefilmrequest = "{\"result\": [{\"id\":1,\"title\":\"Avengers: Endgame\",\"desc\":\"After the devastating events of Avengers: Infinity War (2018), the universe is in ruins due to the efforts of the Mad Titan, Thanos.\",\"actors\":[\"Robert Downey Jr.\",\"Chris Evans\",\"Chris Hemsworth\",\"Mark Ruffalo\"],\"directors\":\"Anthony Russo\",\"rating\":\"9.5/10\",\"category\":[\"Action\",\"Adventure\",\"Drama\",\"Si-Fi\"],\"Company\":\"Marvel Studios\",\"releaseDate\":\"2019\",\"languages\":[\"English\",\"Spanish\",\"Turkish\",\"Arabic\",\"Japanese\"]}]}";
            string bulkpostcodes = "{\"status\":200,\"result\":[{\"query\":\"OX49 5NU\",\"result\":{\"postcode\":\"OX49 5NU\",\"quality\":1,\"eastings\":464447,\"northings\":195647,\"country\":\"England\",\"nhs_ha\":\"South Central\",\"longitude\":-1.069752,\"latitude\":51.655929,\"european_electoral_region\":\"South East\",\"primary_care_trust\":\"Oxfordshire\",\"region\":\"South East\",\"lsoa\":\"South Oxfordshire 011B\",\"msoa\":\"South Oxfordshire 011\",\"incode\":\"5NU\",\"outcode\":\"OX49\",\"parliamentary_constituency\":\"Henley\",\"admin_district\":\"South Oxfordshire\",\"parish\":\"Brightwell Baldwin\",\"admin_county\":\"Oxfordshire\",\"admin_ward\":\"Chalgrove\",\"ced\":\"Chalgrove and Watlington\",\"ccg\":\"NHS Oxfordshire\",\"nuts\":\"Oxfordshire\",\"codes\":{\"admin_district\":\"E07000179\",\"admin_county\":\"E10000025\",\"admin_ward\":\"E05009735\",\"parish\":\"E04008109\",\"parliamentary_constituency\":\"E14000742\",\"ccg\":\"E38000136\",\"ccg_id\":\"10Q\",\"ced\":\"E58001238\",\"nuts\":\"UKJ14\",\"lsoa\":\"E01028601\",\"msoa\":\"E02005968\",\"lau2\":\"E05009735\"}}},{\"query\":\"M32 0JG\",\"result\":{\"postcode\":\"M32 0JG\",\"quality\":1,\"eastings\":379988,\"northings\":395476,\"country\":\"England\",\"nhs_ha\":\"North West\",\"longitude\":-2.302836,\"latitude\":53.455654,\"european_electoral_region\":\"North West\",\"primary_care_trust\":\"Trafford\",\"region\":\"North West\",\"lsoa\":\"Trafford 003C\",\"msoa\":\"Trafford 003\",\"incode\":\"0JG\",\"outcode\":\"M32\",\"parliamentary_constituency\":\"Stretford and Urmston\",\"admin_district\":\"Trafford\",\"parish\":\"Trafford, unparished area\",\"admin_county\":null,\"admin_ward\":\"Gorse Hill\",\"ced\":null,\"ccg\":\"NHS Trafford\",\"nuts\":\"Greater Manchester South West\",\"codes\":{\"admin_district\":\"E08000009\",\"admin_county\":\"E99999999\",\"admin_ward\":\"E05000829\",\"parish\":\"E43000163\",\"parliamentary_constituency\":\"E14000979\",\"ccg\":\"E38000187\",\"ccg_id\":\"02A\",\"ced\":\"E99999999\",\"nuts\":\"UKD34\",\"lsoa\":\"E01006187\",\"msoa\":\"E02001261\",\"lau2\":\"E05000829\"}}},{\"query\":\"NE30 1DP\",\"result\":{\"postcode\":\"NE30 1DP\",\"quality\":1,\"eastings\":435958,\"northings\":568671,\"country\":\"England\",\"nhs_ha\":\"North East\",\"longitude\":-1.439269,\"latitude\":55.011303,\"european_electoral_region\":\"North East\",\"primary_care_trust\":\"North Tyneside\",\"region\":\"North East\",\"lsoa\":\"North Tyneside 016C\",\"msoa\":\"North Tyneside 016\",\"incode\":\"1DP\",\"outcode\":\"NE30\",\"parliamentary_constituency\":\"Tynemouth\",\"admin_district\":\"North Tyneside\",\"parish\":\"North Tyneside, unparished area\",\"admin_county\":null,\"admin_ward\":\"Tynemouth\",\"ced\":null,\"ccg\":\"NHS North Tyneside\",\"nuts\":\"Tyneside\",\"codes\":{\"admin_district\":\"E08000022\",\"admin_county\":\"E99999999\",\"admin_ward\":\"E05001130\",\"parish\":\"E43000176\",\"parliamentary_constituency\":\"E14001006\",\"ccg\":\"E38000127\",\"ccg_id\":\"99C\",\"ced\":\"E99999999\",\"nuts\":\"UKC22\",\"lsoa\":\"E01008561\",\"msoa\":\"E02001753\",\"lau2\":\"E05001130\"}}}]}";
            string singlePostCode = "{\"status\":200,\"result\":{\"postcode\":\"PE7 8NL\",\"quality\":1,\"eastings\":516654,\"northings\":294444,\"country\":\"England\",\"nhs_ha\":\"East of England\",\"longitude\":-0.281579,\"latitude\":52.535375,\"european_electoral_region\":\"Eastern\",\"primary_care_trust\":\"Peterborough\",\"region\":\"East of England\",\"lsoa\":\"Peterborough 023F\",\"msoa\":\"Peterborough 023\",\"incode\":\"8NL\",\"outcode\":\"PE7\",\"parliamentary_constituency\":\"North West Cambridgeshire\",\"admin_district\":\"Peterborough\",\"parish\":\"Hampton Hargate and Vale\",\"admin_county\":null,\"admin_ward\":\"Hampton Vale\",\"ced\":null,\"ccg\":\"NHS Cambridgeshire and Peterborough\",\"nuts\":\"Peterborough\",\"codes\":{\"admin_district\":\"E06000031\",\"admin_county\":\"E99999999\",\"admin_ward\":\"E05010815\",\"parish\":\"E04012079\",\"parliamentary_constituency\":\"E14000855\",\"ccg\":\"E38000026\",\"ccg_id\":\"06H\",\"ced\":\"E99999999\",\"nuts\":\"UKH11\",\"lsoa\":\"E01033180\",\"msoa\":\"E02006878\",\"lau2\":\"E05010815\"}}}";
            List<string> Tests = new List<string> {transform ,manipulatedbatchfilmrequest, manipulatedsinglefilmrequest, bulkpostcodes, singlePostCode };
            Tests.ForEach(x =>
            {
                int len = ojectContent.Length;
                try
                {
                    JObject attempt = JObject.Parse(x);
                }
                catch(JsonSerializationException e)
                {
                    Debug.WriteLine("Serialization error");
                }

                catch (JsonReaderException ex)
                {
                    Debug.WriteLine("Read error");
                }

            });
            

           var newType = JsonConvert.DeserializeObject<T>(transform);
            return newType;
        }
    }
}
